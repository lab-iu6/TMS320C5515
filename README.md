## Как установить CCS TI для старой c55
1) Скачиваем и устанавливаем последнюю версию с [сайта TI](https://www.ti.com/tool/CCSTUDIO) (либо из [приложенного файла](https://github.com/lab-iu6/TMS320C5515/blob/setup/установка/ccs_setup_12.8.1.00005.exe))
 
   При установке достаточно выбрать компонент C55x ultra-low-power DSP, как представлено на рисунке ниже.
<div align="center">
  <img src="https://github.com/user-attachments/assets/7468cebd-9f54-4aa0-885b-90bf8de96808" alt="setup_components" width="800"/>
</div>

 3) Скачиваем и устанавливаем [Code Generation Tools](https://github.com/lab-iu6/TMS320C5515/blob/setup/установка/ti_cgt_c5500_4.4.1_setup_win32.exe) (содержит компилятор, ассемблер, линковщик и т.д.).

>[!Note]
>файлы для установки находятся в ветке [setup](https://github.com/lab-iu6/TMS320C5515/tree/setup)

----------------
## Работа со средой CodeComposerStudio

Основной код программы находится в файле ``main.c``, расположение которого показано на рисунке ниже. 
<div align="center">
   <img src="https://github.com/user-attachments/assets/15b0764d-da84-42f7-96e2-32c48144857c" alt="main" width="800"/>
</div>

Если будет необходимость открыть файл, который включен в код, то можно воспользоваться функцией ``Open Declaration``, предварительно выделив строку с искомым файлом. Таким образом открываются файлы, описания выделенной функции или инициализация выбранной переменной (см рисунок ниже).
<div align="center">
   <img src="https://github.com/user-attachments/assets/6252d4a7-9151-4df1-9eae-ad750a48f64a" alt="open_decl" width="800"/>
</div>

У каждого проекта есть несколько разделов:

Раздел ``Binaries`` — после компиляции в этой папке будет находиться бинарный исполняемый файл ``*.out``.

Раздел ``Includes`` — здесь перечислены все директории, ссылки на которые включаются в опциях компиляции. Дополняется список всеми файлами ``*.h`` и ``*.inc``, которые упоминаются в проекте.

Раздел ``Debug`` — содержит все файлы компиляции, включая ``*.map`` и ``*.obj``.

Далее перечисляются все исходные файлы. Если файлы с исходным кодом содержат функции, включают другие файлы или структуры, то можно, нажав стрелку напротив имени файла, увидеть список всех входящих в него объектов. Двойным щелчком мыши на имени объекта осуществляется переход к тому месту в программном коде, где размещены соответствующая функция, подключаемый файл или структура. Следует отметить, что разделы ``Binaries`` и ``Debug`` появляются только после первой успешной компиляции проекта.

Созданный вами либо импортированный проект можно:

- скомпилировать путем нажания на значок ``молоток``. В процессе этой операции будет произведена сборка проекта и проверка на ошибки;
- загрузить код в отладочную плату, т.е. прошить. Для этого на верхней панели нажмите ``Run -> Load`` и выберите проект для прошивки (см рисунок).
<div align="center">
   <img src="https://github.com/user-attachments/assets/fa61f1cd-076b-49ba-b2c9-d7b7e633be4b" alt="run" width="800"/>
</div>
- запустить программу на микроконтроллере в режиме отладки для того, чтобы следить за значениями переменных, использовать точки останова, шагать по коду и др. Для запуска режима откладки нажмите на значок ``жука`` на верхней панели (см рисунок ниже).
<div align="center">
   <img src="https://github.com/user-attachments/assets/54dd03c2-7d02-4fb4-a247-deb6623d7320" alt="debug" width="800"/>
</div>

Для того чтобы открыть существующий проект, необходимо в левом верхнем углу нажать кнопку ``File -> Import``, выбрать тип проекта ``CCS Projects`` (см рисунок ниже) и в вашей файловой системе выбрать папку с проектом.
<div align="center">
   <img src="https://github.com/user-attachments/assets/0e78d304-6aff-42b7-8e16-609f2e954251" alt="import" width="800"/>
</div>

Подходящие для импорта проекты появятся в графе ``Discovered projects`` (см рисунок ниже).
<div align="center">
   <img src="https://github.com/user-attachments/assets/6d5fc1bf-6b7b-40d7-98b8-f397f7f363ae" alt="disc_proj" width="800"/>
</div>


----------------
## Работа с тестовым проектом
  
Texas Instruments вместе с платой поставляет установочный диск, в котором содержится IDE и разные примеры, однако целевая платформа для этого диска - Windows XP. Исходная папка со всей необходимой документацией, примерами и проектами расположена в ветке setup, в [соответствующей папке](https://github.com/lab-iu6/TMS320C5515/tree/setup/usbstk5515_v1). 

Проекты не совместимы с новыми версиями CCS, полезными могут оказаться: 
- исходный код
- документация

Тестовый код перенесен в современную CCS. Он находится в папке [test](https://github.com/nargi3/TMS320C5515/tree/master/test). В отличие от оригинальной организации, где каждый пример содержался в отдельном проекте, в примере все примеры умещены в одну функцию ``main()``. Вызовы разных примеров можно комбинировать между собой, убрать из программы выполнение того или иного примера можно просто закомментировав соответствующую строку. 

>[!Warning]
>Подобное решение принято в целях упрощения знакомства с устройством. 
>Ресурсы микроконтроллера сильно ограничены, при предложенной реализации узким местом выступает объем оперативной памяти, в нее просто не вмещаются все глобальные переменные / массивы, поэтому в примере nor_writer, объемы ``tx`` и ``rx`` уменьшены с ``4000 * 2`` байт до ``400 * 2 `` 

----------------
## Настройка собственного проекта

Чтобы создать проект для платы TMS320C5515 надо создать проект в IDE CCS, при настройке проекта необходимо указать следующие настройки:

<div align="center">
  <img src="https://github.com/user-attachments/assets/3c4af697-6460-4a1d-8bde-de845e32ea3a" alt="img" width="600"/>
</div>

При выборе Compiler Version необходимо нажать More -> Add -> и выбрать папку, куда был установлен Code Generation Tool.
> [!Warning]
> ``Compiler version`` надо указать вручную, соответственно, если ``Code Generation Tools`` не был установлен, выбрать вы его не сможете.


